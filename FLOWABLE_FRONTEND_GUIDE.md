# Flowable 前端功能使用指南

## 概述

本项目为 Flowable 工作流引擎提供了完整的前端管理界面，包含流程模型管理、流程设计、流程申请、流程监控和任务管理等核心功能。

## 页面结构

### 1. 流程模型管理 (`ModelManagement.vue`)

**功能特性：**
- 📊 统计卡片显示模型总数、已发布、草稿、已归档数量
- 🔍 支持按模型名称/Key搜索
- 📋 列表视图和卡片视图切换
- ➕ 新增模型功能
- ✏️ 编辑模型功能
- 🚀 发布模型功能
- ▶️ 启动流程功能
- 📋 批量操作（批量发布、批量删除）
- 📋 更多操作（复制、导出、版本历史、删除）

**主要操作：**
1. **新增模型**：填写模型Key、名称、分类、描述等信息
2. **编辑模型**：修改模型的基本信息
3. **发布模型**：将草稿状态的模型发布为可用流程
4. **启动流程**：直接从模型启动新的流程实例
5. **批量操作**：选择多个模型进行批量发布或删除

### 2. 流程设计器 (`ProcessDesigner.vue`)

**功能特性：**
- 🎨 基于 bpmn.js 的可视化流程设计器
- 📝 模型基本信息编辑
- 🔧 工具栏操作（放大、缩小、重置、撤销、重做）
- 📤 导入/导出 BPMN 文件
- 🖼️ 流程预览功能
- ⚙️ 元素属性面板（支持任务节点、网关等属性配置）

**主要操作：**
1. **设计流程**：拖拽方式创建流程图
2. **配置属性**：设置节点名称、分配人、候选用户等
3. **保存模型**：保存设计的流程模型
4. **发布模型**：直接发布设计的流程
5. **导入导出**：支持BPMN文件的导入导出

### 3. 流程申请 (`ProcessApplication.vue`)

**功能特性：**
- 📂 流程分类展示（请假、报销、审批、其他）
- 🔍 流程搜索功能
- 📋 流程卡片展示（包含统计信息）
- 📝 动态表单支持（文本、数字、日期、选择、文件上传等）
- 📎 附件上传功能
- 🚀 一键申请流程

**主要操作：**
1. **选择流程**：根据分类选择要申请的流程
2. **填写表单**：根据流程配置填写申请信息
3. **上传附件**：支持上传相关附件文件
4. **提交申请**：提交流程申请，启动新的流程实例

**支持的表单类型：**
- 文本输入框
- 文本域
- 数字输入
- 日期选择
- 日期时间选择
- 下拉选择
- 单选框
- 复选框
- 文件上传

### 4. 流程监控 (`ProcessMonitor.vue`)

**功能特性：**
- 📊 实时统计（运行中、已完成、已挂起、已终止）
- 🔍 多维度筛选（状态筛选、关键词搜索）
- 📋 列表视图和时间线视图切换
- ⚙️ 流程实例管理（挂起、激活、终止）
- 📈 流程详情查看（基本信息、流程图、变量、历史）
- 📋 批量操作支持

**主要操作：**
1. **监控状态**：实时查看流程实例状态
2. **管理实例**：挂起、激活、终止流程实例
3. **查看详情**：查看流程实例的详细信息
4. **批量管理**：批量操作多个流程实例

### 5. 任务管理 (`TaskManagement.vue`)

**功能特性：**
- 📊 任务统计（待办、已办、逾期、今日到期）
- 🔄 待办/已办任务切换
- 🔍 任务搜索功能
- 📋 列表视图和卡片视图
- ⚡ 任务处理（认领、完成）
- 📝 动态任务表单
- 📋 批量操作支持

**主要操作：**
1. **查看任务**：查看待办和已办任务列表
2. **认领任务**：认领未分配的任务
3. **处理任务**：填写处理意见和表单，完成任务
4. **批量操作**：批量认领或处理任务

## 技术栈

- **Vue 3** - 响应式前端框架
- **TypeScript** - 类型安全的JavaScript
- **Element Plus** - UI组件库
- **bpmn-js** - BPMN流程图渲染和编辑
- **Axios** - HTTP请求库
- **Pinia** - 状态管理
- **Vue Router** - 路由管理

## API 接口

前端通过以下API与后端交互：

### 模型管理
- `getFlowableModelsByPage` - 分页获取模型列表
- `saveFlowableModel` - 保存模型
- `deleteFlowableModel` - 删除模型
- `publishFlowableModel` - 发布模型
- `copyFlowableModel` - 复制模型

### 流程管理
- `startFlowableProcess` - 启动流程
- `getStartedProcessByPage` - 分页获取已启动流程
- `deleteFlowableProcess` - 删除流程实例

### 任务管理
- `getTodoTasksByPage` - 分页获取待办任务
- `getDoneTasksByPage` - 分页获取已办任务
- `claimFlowableTask` - 认领任务
- `completeFlowableTask` - 完成任务
- `getFlowableTaskDetail` - 获取任务详情

## 使用说明

### 1. 启动项目

```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev
```

### 2. 访问页面

根据路由配置，访问相应的页面：
- 流程模型管理：`/flowable/model-management`
- 流程设计器：`/flowable/process-designer`
- 流程申请：`/flowable/process-application`
- 流程监控：`/flowable/process-monitor`
- 任务管理：`/flowable/task-management`

### 3. 基本使用流程

1. **设计流程**：使用流程设计器创建BPMN流程图
2. **发布模型**：将设计好的流程模型发布
3. **申请流程**：用户填写表单申请流程
4. **处理任务**：相关人员处理待办任务
5. **监控流程**：管理员监控流程运行状态

## 特色功能

### 🎨 可视化设计
- 拖拽式流程设计
- 实时预览
- 属性配置

### 📝 动态表单
- 根据流程配置动态生成表单
- 支持多种表单控件
- 表单验证

### 📊 实时监控
- 流程状态实时统计
- 任务处理情况监控
- 可视化数据展示

### 🔧 灵活配置
- 支持多种流程类型
- 可配置任务分配规则
- 支持流程变量

## 注意事项

1. **浏览器兼容性**：建议使用现代浏览器（Chrome、Firefox、Safari、Edge）
2. **文件上传**：支持常见文件格式，单个文件不超过10MB
3. **权限控制**：根据用户角色显示相应功能
4. **数据缓存**：合理使用缓存提升性能

## 后续优化

- [ ] 添加流程版本管理
- [ ] 支持流程模板
- [ ] 增加移动端适配
- [ ] 添加国际化支持
- [ ] 优化大流程图渲染性能
- [ ] 增加更多表单控件类型

---

通过以上功能，用户可以完整地使用Flowable工作流引擎进行流程的设计、申请、执行和监控，实现业务流程的数字化管理。
